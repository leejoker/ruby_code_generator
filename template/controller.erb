package <%=data['package_name']%>.controller;

import <%=data['package_name']%>.entity.<%=data['class_name']%>;
import <%=data['package_name']%>.service.<%=data['class_name']%>Service;
import <%=data['common_package']%>.ResponseResult;
import com.google.common.collect.Lists;
import lombok.extern.slf4j.Slf4j;
import org.apache.commons.lang3.exception.ExceptionUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.List;

/**
 * 理财数据接口
 *
 * @author liang
 * @date 2020/07/31
 */
@Controller
@RequestMapping("/cqbbab/bigdata/<%=data['module_name']%>")
@Slf4j
public class <%=data['class_name']%>Controller {
    @Autowired
    private <%=data['class_name']%>Service <%=data['class_name'].firstdown%>Service;

    @GetMapping(value = "", produces = {"application/json; charset=UTF-8"})
    @ResponseBody
    public ResponseResult listApi() {
        try {
            List<<%=data['class_name']%>> publishList = <%=data['class_name'].firstdown%>Service.getPublishList();
            publishList = publishList == null ? Lists.newArrayList() : publishList;
            return ResponseResult.returnData(publishList, "执行成功");
        } catch (Exception e) {
            log.error("获取发布数据失败: exception={}", ExceptionUtils.getStackTrace(e));
        }
        return ResponseResult.error("获取发布数据失败");
    }
}